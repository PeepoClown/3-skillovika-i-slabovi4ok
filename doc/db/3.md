## Реляционное исчисление (вариант кортежей).

Реляционное исчисление получило название от той части символьной 
логики, которая называется исчислением предикатов. В контексте баз данных 
оно существует в двух формах: 
- в форме предложенного Э. Коддом реляционного исчисления кортежей
- в форме предложенного Лакруа и Пиро реляционного исчисления доменов.

В логике первого порядка (или теории исчисления предикатов) под 
предикатом подразумевается истинностная функция с параметрами. После 
подстановки значений вместо параметров функция становится выражением, 
называемым суждением, которое может быть истинным или ложным. 

Например, предложения «Иван Петров является сотрудником данной 
организации» и «Иван Петров имеет более высокую зарплату, чем Петр 
Иванов» являются суждениями, поскольку можно определить их истинность 
или ложность. В первом случае функция «является сотрудником данной 
организации» имеет один параметр («Иван Петров»), а во втором случае 
функция «имеет более высокую зарплату, чем» имеет два параметра («Иван 
Петров» и «Петр Иванов»).

Если предикат содержит переменную, например в виде «х является 
сотрудником этой организации», то у этой переменной должна быть 
соответствующая область определения. При подстановке вместо переменной 
х одних значений из ее области определения данное суждение может 
оказаться истинным, а при подстановке других — ложным.

Если Р — предикат, то множество всех значений переменной х, при которых Р 
становится истинным, можно символически записать следующим образом: 
> { х | Р ( х ) }

Предикаты могут соединяться с помощью логических операций ∧ (AND), ∨
(OR) и ~ (NOT) с образованием составных предикатов.

---

В реляционном исчислении кортежей задача состоит в нахождении таких 
кортежей, для которых предикат является истинным. Это исчисление 
основано на переменных кортежа. Переменными кортежа являются такие 
переменные, областью определения которых служит указанное отношение.

Например, для указания отношения Staff в качестве области определения 
переменной кортежа S используется следующая форма записи: Staff ( S )

Запрос «найти множество всех кортежей S, для которых F(S) является 
истинным» можно записать следующим образом: 
> { S | F ( S ) }

Здесь предикат F называется формулой (в математической логике, правильно
построенной формулой — Well-Formed Formula, или сокращенно WFF). 

Например, запрос «Создайте список всех менеджеров, зарплата которых 
превышает 25000 рублей» можно записать следующим образом: 
> { S.fName, S.Iname | Staff( S ) ∧ S.position = 'Manager' ∧ S.salary > 25000 }

Для указания количества экземпляров, к которым должен быть применен 
предикат, в формулах могут использоваться два типа кванторов.

Квантор существования ∃ («существует») используется в формуле, которая 
должна быть истинной хотя бы для одного экземпляра, например: 
> Staff(S) ∧ (∃ B) ( Branch(B) ∧ (B.branchNo = S.branchNo) ∧ B.city = 'London' )

Это выражение означает, что в отношении Branch существует кортеж, который 
имеет такое же значение атрибута branchNo, что и значение атрибута 
branchNo в текущем кортеже S из отношения Staff, а атрибут city из кортежа В 
имеет значение 'London'.

Квантор всеобщности ∀, или так называемый символ «для всех», 
используется в выражениях, которые относятся ко веем экземплярам, 
например: 
> (∀ B) (В.city ≠ 'Paris')

Это выражение означает, что ни в одном кортеже отношения Branch значение 
атрибута city не равно 'Paris'.

Переменные кортежа называются свободными переменными, если они не 
квалифицируются кванторами ∀ или ∃; в противном случае они называются 
связанными переменными.

В реляционном исчислении кортежей используются переменные, областью 
определения которых являются кортежи в отношении. С другой стороны, в 
реляционном исчислении доменов также используются переменные, но их 
значения берутся из области определения атрибутов, а не из кортежей 
отношения. Любое выражение в реляционном исчислении доменов имеет 
следующую общую форму: 
> { d<sub>1</sub>, d<sub>2</sub>, ..., d<sub>n</sub> | F ( d<sub>1</sub>, d<sub>2</sub>, ..., d<sub>m</sub> ) } m ≥ n

Здесь d<sub>1</sub>, d<sub>2</sub>, ..., d<sub>n</sub> — переменные области определения (домена), 
a F ( d<sub>1</sub>, d<sub>2</sub>, ..., d<sub>m</sub> ) — формула.

Найдите имена всех менеджеров, зарплата которых превышает 25000 рублей: 
> { fN, lN | ( ∃ sN, posn, sex, DOB, sal, bN ) ( Staff(sN, fN, lN, posn, sex, DOB, sal, bN) 
∧ posn = 'Manager' ∧ sal = 25000 ) }

